{"version":3,"file":"static/js/925.85192ed8.chunk.js","mappings":"sJAUIA,EAAqB,IAAIC,UAAU,kEAIvC,IAQMC,EAA4C,SAAC,GAAiB,IAAhBF,EAAe,EAAfA,UAEhD,GAAgCG,EAAAA,EAAAA,UAA4B,IAA5D,eAAQC,EAAR,KAAiBC,EAAjB,KAWA,OAVAC,EAAAA,EAAAA,YAAU,WAEFN,EAAUO,iBAAiB,WAAU,SAACC,GAGlCH,GAAY,SAACI,GAAD,wBAAoBA,IAApB,OAAqCC,KAAKC,MAAMH,EAAEI,OAAlD,GAA0D,GAG7E,GAAC,KAEC,gBAAKC,MAAO,CAACC,OAAO,QAAQC,UAAU,QAAtC,SACFX,EAASY,KAAI,SAACC,EAAOC,GAAR,OAAkB,SAACC,EAAD,CAAUC,QAASH,GAAQC,EAA7C,KAErB,EACKC,EAA+C,SAAC,GAAe,IAAdC,EAAa,EAAbA,QACnD,OAAO,iBAAKP,MAAO,CAACQ,aAAa,QAA1B,WACH,gBAAKR,MAAO,CAACS,MAAO,QAASC,IAAKH,EAAQI,SAC1C,0BAAK,uBAAIJ,EAAQA,aACjB,qCAAaA,EAAQK,cAE5B,EAEKC,EAA4B,WAC9B,OAA2BvB,EAAAA,EAAAA,UAAS,IAApC,eAAOiB,EAAP,KAAeO,EAAf,KACA,GAAqCxB,EAAAA,EAAAA,UAA4B,WAAjE,eAAOyB,EAAP,KAAmBC,EAAnB,MAEAvB,EAAAA,EAAAA,YAAU,WAENN,EAAUO,iBAAiB,QAAO,WAE1BsB,EAAe,QAElB,GAGR,GAAC,IASF,OAAO,4BACH,0BAAK,qBAAUC,SAAU,SAACtB,GAAD,OAAKmB,EAAWnB,EAAEuB,cAAcC,MAAhC,EAAwCA,MAAOZ,OACxE,mBAASa,SAAwB,UAAdL,EAAuBM,QAT5B,WAENd,IAERpB,EAAUmC,KAAKf,GACfO,EAAW,IACd,EAGG,oBAGP,EAEKS,EAAiB,WAYnB,OAVA9B,EAAAA,EAAAA,YAAU,YAlEVN,EAAY,IAAIC,UAAU,mEAsEZM,iBAAiB,SAAQ,WAE/B8B,QAAQC,IAAI,QACf,GACJ,GAAC,KAEK,4BACH,SAACpC,EAAD,CAAWF,UAAYA,KACvB,SAAC0B,EAAD,MAEP,EACD,UA/E2B,WAGvB,OAAO,0BACH,SAACU,EAAD,KAEP,C","sources":["pages/Chat/ChatPage.tsx"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\r\n\r\n\r\nexport type ChatMessageType={\r\n    message:string,\r\n    photo:string,\r\n    userID:number,\r\n    userName:string\r\n}\r\n\r\nlet wsChannel:WebSocket= new WebSocket(\"wss://social-network.samuraijs.com/handlers/ChatHandler.ashx\\n\");\r\nfunction createChannel() {\r\n    wsChannel = new WebSocket(\"wss://social-network.samuraijs.com/handlers/ChatHandler.ashx\\n\");\r\n}\r\nconst ChatPage: React.FC = () => {\r\n\r\n\r\n    return <div>\r\n        <Chat/>\r\n    </div>\r\n}\r\n\r\nconst Messages: React.FC<{wsChannel:WebSocket}> = ({wsChannel}) => {\r\n\r\n    const  [messages,setMessages] = useState<ChatMessageType[]>([])\r\n    useEffect(()=>\r\n        {\r\n            wsChannel.addEventListener('message',(e)=>{\r\n            const myObj:ChatMessageType[] = [{message:\"Salut\",photo:\"https://media-exp1.licdn.com/dms/image/C4E03AQEdFePUt0Vgow/profile-displayphoto-shrink_200_200/0/1652889980027?e=2147483647&v=beta&t=IoAjWMFPHcQ7CFyuAM-VWXdnbEpwUzH1kJ5IOLIkYmY\", userID:5,userName:\"Vitea\"}];\r\n                // @ts-ignore\r\n                setMessages((prevMessages)=>[...prevMessages ,...JSON.parse(e.data)])}\r\n\r\n            )\r\n        },[]\r\n    )\r\n    return <div style={{height:'400px',overflowY:'auto'}}>\r\n        {messages.map((n: any,index) => <Message  message={n} key={index} />)}\r\n    </div>\r\n}\r\nconst Message: React.FC<{message:ChatMessageType}> = ({message}) => {\r\n    return <div style={{marginBottom:\"20px\"}}>\r\n        <img style={{width: \"50px\"}} src={message.photo}/>\r\n        <div><b>{message.message}</b></div>\r\n        <div>Author:{message.userName}</div>\r\n    </div>\r\n}\r\n\r\nconst AddMessagesForm: React.FC = () => {\r\n    const [message,setMessage]=useState('');\r\n    const [readyStatus,setReadyStatus] = useState<'pending'|'ready'>('pending');\r\n\r\n    useEffect(()=>\r\n    {\r\n        wsChannel.addEventListener('open',()=>\r\n            {\r\n                setReadyStatus('ready');\r\n\r\n            }\r\n\r\n        )\r\n    },[])\r\n\r\n    const sendMessage=()=>\r\n    {\r\n            if(!message)\r\n                return\r\n        wsChannel.send(message)\r\n        setMessage('')\r\n    }\r\n    return <div>\r\n        <div><textarea onChange={(e)=>setMessage(e.currentTarget.value)} value={message}></textarea></div>\r\n        <button  disabled={readyStatus!=='ready'} onClick={sendMessage}>Send</button>\r\n\r\n    </div>\r\n}\r\n\r\nconst Chat: React.FC = () => {\r\n\r\n    useEffect(()=>\r\n    {\r\n\r\n        createChannel();\r\n        wsChannel.addEventListener('close',()=>\r\n        {\r\n            console.log(\"Error\")\r\n        })\r\n    },[])\r\n\r\n    return <div>\r\n        <Messages  wsChannel= {wsChannel} />\r\n        <AddMessagesForm/>\r\n    </div>\r\n}\r\nexport default ChatPage;"],"names":["wsChannel","WebSocket","Messages","useState","messages","setMessages","useEffect","addEventListener","e","prevMessages","JSON","parse","data","style","height","overflowY","map","n","index","Message","message","marginBottom","width","src","photo","userName","AddMessagesForm","setMessage","readyStatus","setReadyStatus","onChange","currentTarget","value","disabled","onClick","send","Chat","console","log"],"sourceRoot":""}